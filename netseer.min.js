!function(){function t(t,e){this.dim=t,this.type=e}function e(){}function n(){this._data_mappings={}}function i(t){this._vjit=t}function r(t,e){this._vjit=t,this._shape=e}function o(t,e){this._vjit=t,this._shape=e}var s={version:"0.0.1"};s.DataDimension=t,t.NUMERIC_DIMENSION="numeric_dimension",t.BOOLEAN_DIMENSION="boolean_dimension",t.STRING_DIMENSION="string_dimension",t.DATE_DIMENSION="date_dimension",t.CONSTANT_DIMENSION="constant_dimension",t.OBJECT_DIMENSION="object_dimension",t.prototype.getValue=function(e){if(this.type===t.CONSTANT_DIMENSION)return this.dim;if(this.type===t.BOOLEAN_DIMENSION){var n=e[this.dim];return n?1:0}return this.dim in e?e[this.dim]:null},s.GraphDescriptor=e,e.DATA_GRAPH="graphdata",e.DATA_NODE_LIST="nodes",e.DATA_EDGE_LIST="edges",e.DATA_NODE_CLASS="node",e.DATA_EDGE_CLASS="link",e.SLOT_NODE_SHAPE="node shape",e.SLOT_EDGE_SHAPE="edge shape",e.DUMMY_STRING="dummy",e.SLOT_NODE_WEIGHT="node size",e.SLOT_EDGE_WEIGHT="edge thickness",e.SLOT_NODE_FILL_COLOR="node fill color",e.SLOT_NODE_BORDER_COLOR="node border color",e.SLOT_EDGE_COLOR="edge color",e.SLOT_NODE_LABEL="node label",e.SLOT_EDGE_LABEL="edge label",e.SLOT_COMMUNITY_LABEL="community label",e.SLOT_EDGE_AFFINITY="edge affinity",e.PREP_TRANSITION="TransitionPreference",e.PREP_PATH="PathPreference",e.STYLE_SHEET_PATH="pathstyles",e.PRE_DATA_GRAPH="pregraphdata",e.COMMUNITY_NODES="community nodes",s.GraphVjit=n,n.prototype.createSVGContext=function(t,e,n,i){return this._context=t.select(e).append("svg").attr("width",n).attr("height",i),this._context},n.prototype.createGraphicsContext=n.prototype.createSVGContext,n.prototype.render=function(){this._graphRender&&this._graphRender.render()},n.prototype.getContext=function(){return this._context},n.prototype.addDataMapping=function(t,e){this._data_mappings[t]=e},n.prototype.getDataMapping=function(t){return this._data_mappings[t]},n.prototype.setData=function(t){this._data=t},n.prototype.getData=function(){return this._data},n.prototype.setNodeRender=function(t){this._nodeRender=t},n.prototype.setEdgeRender=function(t){this._edgeRender=t},n.prototype.setGraphRender=function(t){this._graphRender=t},n.prototype.registerLayout=function(t){this._layout=t},n.prototype.getLayout=function(){return this._layout},n.prototype.computeLayout=function(){var t=this.getData();this._layout.nodes(t[e.DATA_NODE_LIST]).links(t[e.DATA_EDGE_LIST]).start();var n=this._nodeRender,i=this._edgeRender;this._layout.on("tick",function(){i.setEdgeAttribute("x1",function(t){return t.source.x}),i.setEdgeAttribute("y1",function(t){return t.source.y}),i.setEdgeAttribute("x2",function(t){return t.target.x}),i.setEdgeAttribute("y2",function(t){return t.target.y}),n.setNodeAttribute("cx",function(t){return t.x}),n.setNodeAttribute("cy",function(t){return t.y})})},n.prototype.addInteraction=function(t,e){t.call(e)},n.prototype.getGraphRender=function(){return this._graphRender},n.prototype.getNodeRender=function(){return this._nodeRender},n.prototype.getEdgeRender=function(){return this._edgeRender},s.StaticGraphRender=i,i.colorarray=d3.scale.category20(),i.prototype.render=function(){this._vjit._edgeRender&&this._vjit._edgeRender.render(),this._vjit._nodeRender&&this._vjit._nodeRender.render()},s.BasicShapeEdgeRender=r,r.prototype.render=function(){var t=this._vjit.getContext(),n=this._vjit.getData();this._edges=t.selectAll(this._shape+"."+e.DATA_EDGE_CLASS).data(n[e.DATA_EDGE_LIST]).enter().append(this._shape),this.updateEdgeRender()},r.prototype.updateEdgeRender=function(){this.setEdgeAttribute("class",e.DATA_EDGE_CLASS);var t=this._vjit.getDataMapping(e.SLOT_EDGE_WEIGHT);t&&this.setEdgeStyle("stroke-width",function(e){return t.getValue(e)}),t=this._vjit.getDataMapping(e.SLOT_EDGE_COLOR),t&&this.setEdgeStyle("fill",function(e){return i.colorarray[t.getValue(e)]}),t=this._vjit.getDataMapping(e.SLOT_EDGE_LABEL),t&&this.appendEdgeAttribute("title",function(e){return t.getValue(e)})},r.prototype.setEdgeStyle=function(t,e){this._edges.style(t,e)},r.prototype.setEdgeAttribute=function(t,e){this._edges.attr(t,e)},r.prototype.appendEdgeAttribute=function(t,e){this._edges.append(t).text(e)},s.BasicShapeNodeRender=o,o.prototype.render=function(){var t=this._vjit.getContext(),n=this._vjit.getData();this._nodes=t.selectAll(this._shape+"."+e.DATA_NODE_CLASS).data(n[e.DATA_NODE_LIST]).enter().append(this._shape),this.updateNodeRender()},o.prototype.updateNodeRender=function(){this.setNodeAttribute("class",e.DATA_NODE_CLASS);var t=this._vjit.getDataMapping(e.SLOT_NODE_WEIGHT);t&&this.setNodeAttribute("r",function(e){return t.getValue(e)}),t=this._vjit.getDataMapping(e.SLOT_NODE_FILL_COLOR),t&&this.setNodeStyle("fill",function(e){return i.colorarray(t.getValue(e))}),t=this._vjit.getDataMapping(e.SLOT_NODE_BORDER_COLOR),t&&this.setNodeStyle("stroke",function(e){return i.colorarray[t.getValue(e)]});var t=this._vjit.getDataMapping(e.SLOT_NODE_LABEL);t&&this.appendNodeAttribute("title",function(e){return t.getValue(e)})},o.prototype.setNodeStyle=function(t,e){return this._nodes.style(t,e)},o.prototype.setNodeAttribute=function(t,e){return this._nodes.attr(t,e)},o.prototype.appendNodeAttribute=function(t,e){this._nodes.append(t).text(e)},o.prototype.getNodes=function(){return this._nodes},"function"==typeof define&&define.amd?define(s):"object"==typeof module&&module.exports&&(module.exports=s),this.netseer=s}();